<!DOCTYPE html>
<html>
    <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="A portfolio template that uses Material Design Lite.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="keywords" content="Crazy Ana wangminxiang 汪旻翔 ab abao blog tech ryougi doaman luis">
    <meta name="baidu-site-verification" content="Hpzxiw1B40" />
    
    <title>Crazy Ana</title>
    <link rel="icon" href="/image/favicon.ico">
    <link href="https://cdn.bootcss.com/material-design-icons/3.0.1/iconfont/material-icons.min.css" rel="stylesheet">
    <link href="https://cdn.bootcss.com/material-design-lite/1.3.0/material.indigo-pink.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en">
    <link href="https://cdn.bootcss.com/highlight.js/9.12.0/styles/foundation.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/style/done.css" />
</head>
<body>
    <div class="mdl-layout mdl-js-layout done">
        <header class="mdl-layout__header mdl-layout__header--scroll header">
    <div class="mdl-layout__header-row">

    </div>
    <div class="mdl-layout__header-row logo-row">
                <span class="mdl-layout__title">
                    <div class="logo"></div>
                    <span class="mdl-layout__title">Crazy Ana</span>
                </span>
    </div>
    <div class="mdl-layout__header-row">
        <div class="mdl-layout-spacer"></div>
        <nav class="mdl-navigation">
            
            <a class="mdl-navigation__link actived" href="/"><i class="material-icons">explore</i>&nbsp;HOME</a>
            <a class="mdl-navigation__link " href="/search/"><i class="material-icons">search</i>&nbsp;SEARCH</a>
            <a class="mdl-navigation__link " href="/tag/"><i class="material-icons">local_offer</i>&nbsp;ARCHIVES</a>
            <a class="mdl-navigation__link" href="https://github.com/RyougiNevermore" target="_blank"><i class="material-icons">face</i>&nbsp;GITHUB</a>
            <a class="mdl-navigation__link " href="/about/"><i class="material-icons">description</i>&nbsp;ABOUT</a>
        </nav>
    </div>
</header>

<div class="mdl-layout--small-screen-only header-small ">
    <div class="logo-small"></div>
</div>

<div class="mdl-layout__drawer mdl-layout--small-screen-only">
    <span class="mdl-layout-title">Crazy Ana</span>
    <nav class="mdl-navigation">
        <a class="mdl-navigation__link" href="/"><i class="material-icons">explore</i>&nbsp;HOME</a>
        <a class="mdl-navigation__link" href="/tag/"><i class="material-icons">local_offer</i>&nbsp;ARCHIVES</a>
        <a class="mdl-navigation__link" href="https://github.com/RyougiNevermore" target="_blank"><i class="material-icons">face</i>&nbsp;GITHUB</a>
        <a class="mdl-navigation__link" href="/about/"><i class="material-icons">description</i>&nbsp;ABOUT</a>
        <a class="mdl-navigation__link " href="/search/"><i class="material-icons">search</i>&nbsp;SEARCH</a>
    </nav>
</div>

        <main class="mdl-layout__content">
            <div class="page-content">
    <!-- Your content goes here -->
    <div class="mdl-grid">
        <!-- page card >>> -->

<div class="mdl-cell mdl-cell--12-col mdl-card mdl-shadow--2dp">
    <!-- title and bg -->

    
    
    <div class="mdl-card__title" onclick="jump('/2017/07/24/竞争条件-死锁和饿死/')" style="background: url('/material/material-25.jpg') center / cover; cursor: pointer;">
        <h2 class="mdl-card__title-text text--bold" onclick="jump('/2017/07/24/竞争条件-死锁和饿死/')">
            竞争条件: 死锁和饿死
        </h2>
    </div>
    <!-- description -->
    <div class="mdl-card__supporting-text">
        <p class="description">
            
            当多个进程都企图对共享数据进行某种处理，而最后的结果又取决于进程运行的顺序时，则我们认为这发生了竞争条件（race condition）。
死锁是同步的，饥饿时异步的。
死锁可以认为是两个线程或进程同时在请求对方占有的资源，饥饿可以认为是一个线程或是进程在无限的等待另外两个或多个线程或进程占有的但是不会往外释放的资源出现以下四种情况会产生死锁：

相互排斥。一个线程或进程永远占有共享资源，比如，独占该资源。
循环等待。例如，进程A在等待进程B，进程B在等待进程C，而进程C又在等待进程A。
部分分配。资源被部分分配，例如，进程A和B都需要访问一个文件，同时需要用到打印机，进程A得到了这个文...
            
        </p>
        <div class="create_time">
            30th July 24th 2017
        </div>
    </div>
    
    <div class="mdl-card__supporting-text padding-top-0 ">
        
        <a href="/tags/简述/" class="mdl-chip tag">
            <span class="mdl-chip__text mdl-color-text--grey-600">简述</span>
        </a>
        
        <a href="/tags/程序设计/" class="mdl-chip tag">
            <span class="mdl-chip__text mdl-color-text--grey-600">程序设计</span>
        </a>
        
        <a href="/tags/锁/" class="mdl-chip tag">
            <span class="mdl-chip__text mdl-color-text--grey-600">锁</span>
        </a>
        
    </div>
    
    <!-- tags -->
    <div class="mdl-card__actions mdl-card--border">
        <div class="mdl-grid padding-0" >
            <div class="mdl-cell mdl-cell--12-col" >
                <button class="mdl-button mdl-js-button mdl-button--accent mdl-color--grey-200 center" onclick="jump('/2017/07/24/竞争条件-死锁和饿死/')">
                    READ
                </button>
            </div>
        </div>
    </div>
</div>
<!-- <<< page card -->

<div class="mdl-cell mdl-cell--12-col mdl-card mdl-shadow--2dp">
    <!-- title and bg -->

    
    
    <div class="mdl-card__title" onclick="jump('/2017/07/23/SOLID/')" style="background: url('/material/material-11.jpg') center / cover; cursor: pointer;">
        <h2 class="mdl-card__title-text text--bold" onclick="jump('/2017/07/23/SOLID/')">
            SOLID
        </h2>
    </div>
    <!-- description -->
    <div class="mdl-card__supporting-text">
        <p class="description">
            
            SRPThe Single Responsibility Principle。
单一责任原则，只做一件事，不影响其他。
OCPThe Open Closed Principle。
开放封闭原则，支持替换的服务，而不用修改客户模块，接口化，修改实现，最小修改面，单一修改。 
LSPThe Liskov Substitution Principle。
里氏替换原则，在考虑一个特定设计是否恰当时，不能完全孤立地来看这个解决方案，必须要根据该设计的使用者所作出的合理假设来审视它。 
ISPThe Interface Segregation Principle
接口分离原则，使用多个专门的接口比使...
            
        </p>
        <div class="create_time">
            29th July 23rd 2017
        </div>
    </div>
    
    <div class="mdl-card__supporting-text padding-top-0 ">
        
        <a href="/tags/简述/" class="mdl-chip tag">
            <span class="mdl-chip__text mdl-color-text--grey-600">简述</span>
        </a>
        
        <a href="/tags/程序设计/" class="mdl-chip tag">
            <span class="mdl-chip__text mdl-color-text--grey-600">程序设计</span>
        </a>
        
        <a href="/tags/理论/" class="mdl-chip tag">
            <span class="mdl-chip__text mdl-color-text--grey-600">理论</span>
        </a>
        
    </div>
    
    <!-- tags -->
    <div class="mdl-card__actions mdl-card--border">
        <div class="mdl-grid padding-0" >
            <div class="mdl-cell mdl-cell--12-col" >
                <button class="mdl-button mdl-js-button mdl-button--accent mdl-color--grey-200 center" onclick="jump('/2017/07/23/SOLID/')">
                    READ
                </button>
            </div>
        </div>
    </div>
</div>
<!-- <<< page card -->

<div class="mdl-cell mdl-cell--12-col mdl-card mdl-shadow--2dp">
    <!-- title and bg -->

    
    
    <div class="mdl-card__title" onclick="jump('/2017/07/14/how-to-write-a-database/')" style="background: url('/material/material-51.jpg') center / cover; cursor: pointer;">
        <h2 class="mdl-card__title-text text--bold" onclick="jump('/2017/07/14/how-to-write-a-database/')">
            How to write [A] Database
        </h2>
    </div>
    <!-- description -->
    <div class="mdl-card__supporting-text">
        <p class="description">
            
            Its a great question, and deserves a long answer.Most database servers are built in C, and store data using B-tree type constructs.In the old days there was a product called C-Isam (c library for an indexed sequential access method) which is a low level library to help C programmers write data in...
            
        </p>
        <div class="create_time">
            28th July 14th 2017
        </div>
    </div>
    
    <div class="mdl-card__supporting-text padding-top-0 ">
        
        <a href="/tags/数据库/" class="mdl-chip tag">
            <span class="mdl-chip__text mdl-color-text--grey-600">数据库</span>
        </a>
        
        <a href="/tags/程序设计/" class="mdl-chip tag">
            <span class="mdl-chip__text mdl-color-text--grey-600">程序设计</span>
        </a>
        
        <a href="/tags/搬运/" class="mdl-chip tag">
            <span class="mdl-chip__text mdl-color-text--grey-600">搬运</span>
        </a>
        
    </div>
    
    <!-- tags -->
    <div class="mdl-card__actions mdl-card--border">
        <div class="mdl-grid padding-0" >
            <div class="mdl-cell mdl-cell--12-col" >
                <button class="mdl-button mdl-js-button mdl-button--accent mdl-color--grey-200 center" onclick="jump('/2017/07/14/how-to-write-a-database/')">
                    READ
                </button>
            </div>
        </div>
    </div>
</div>
<!-- <<< page card -->

<div class="mdl-cell mdl-cell--12-col mdl-card mdl-shadow--2dp">
    <!-- title and bg -->

    
    
    <div class="mdl-card__title" onclick="jump('/2017/07/12/怎么实现一个多消费者无锁的队列/')" style="background: url('/material/material-19.jpg') center / cover; cursor: pointer;">
        <h2 class="mdl-card__title-text text--bold" onclick="jump('/2017/07/12/怎么实现一个多消费者无锁的队列/')">
            怎么实现一个多消费者无锁的队列
        </h2>
    </div>
    <!-- description -->
    <div class="mdl-card__supporting-text">
        <p class="description">
            
            由带锁的多线程访问的单个生产者不会解决你的问题，因为它只是转移到您自己的程序从干扰侧锁定。
解决你的问题从您需要的事件模型的类型各不相同。即你需要的事件按时间顺序; 消耗吗合并;或任何特殊的要求。既然你要处理干扰和多生产者，这听起来非常像外汇交易系统:-)不过，根据我的经验，假定你需要按时间顺序排列顺序每个生产者但不在乎关于混合生产者之间的事件，我会推荐你做合并线程队列。
结构是

每个生产者生产数据并放入其自己命名的队列
工作线程不断对队列进行检查。为每个队列中删除一个或多个项目并把它放到你单个生产者干扰单个生产者。

请注意，在上述情况中，

每个生产者队列是一个单个生产者单个消费者...
            
        </p>
        <div class="create_time">
            28th July 12th 2017
        </div>
    </div>
    
    <div class="mdl-card__supporting-text padding-top-0 ">
        
        <a href="/tags/简述/" class="mdl-chip tag">
            <span class="mdl-chip__text mdl-color-text--grey-600">简述</span>
        </a>
        
        <a href="/tags/无锁/" class="mdl-chip tag">
            <span class="mdl-chip__text mdl-color-text--grey-600">无锁</span>
        </a>
        
        <a href="/tags/队列/" class="mdl-chip tag">
            <span class="mdl-chip__text mdl-color-text--grey-600">队列</span>
        </a>
        
    </div>
    
    <!-- tags -->
    <div class="mdl-card__actions mdl-card--border">
        <div class="mdl-grid padding-0" >
            <div class="mdl-cell mdl-cell--12-col" >
                <button class="mdl-button mdl-js-button mdl-button--accent mdl-color--grey-200 center" onclick="jump('/2017/07/12/怎么实现一个多消费者无锁的队列/')">
                    READ
                </button>
            </div>
        </div>
    </div>
</div>
<!-- <<< page card -->

<div class="mdl-cell mdl-cell--12-col mdl-card mdl-shadow--2dp">
    <!-- title and bg -->

    
    
    <div class="mdl-card__title" onclick="jump('/2017/07/10/微服务应该是事件驱动：-自洽-vs-当局/')" style="background: url('/material/material-24.jpg') center / cover; cursor: pointer;">
        <h2 class="mdl-card__title-text text--bold" onclick="jump('/2017/07/10/微服务应该是事件驱动：-自洽-vs-当局/')">
            微服务应该是事件驱动： 自洽 vs 当局
        </h2>
    </div>
    <!-- description -->
    <div class="mdl-card__supporting-text">
        <p class="description">
            
            前言在一系列的假设与实践中去何构建 microservices 使用事件驱动的方法，得出事件驱动唯一真正的方式打造 microservices或任何复杂分布式体系结构。
事件驱动与解耦事件驱动可以解决服务解耦，以及服务隔离。微服务间光靠请求访问是不科学，某种意义上说，它们并没有解耦隔离，最终还是耦合在数据库上，从而导致数据库的集群会越来越庞大，很难就就。一次请求，先访问服务a，然后需要访问服务b，那这次请求边界则是服务a加上服务b，意味着这两个服务可以视为一个服务。同时，额外的同步的请求会带来更多的隐患。这就是当局。服务a在这个环境里是要依赖其他服务的状态，且是同步的。
基于上述的场景，...
            
        </p>
        <div class="create_time">
            28th July 10th 2017
        </div>
    </div>
    
    <div class="mdl-card__supporting-text padding-top-0 ">
        
        <a href="/tags/简述/" class="mdl-chip tag">
            <span class="mdl-chip__text mdl-color-text--grey-600">简述</span>
        </a>
        
        <a href="/tags/微服务/" class="mdl-chip tag">
            <span class="mdl-chip__text mdl-color-text--grey-600">微服务</span>
        </a>
        
        <a href="/tags/EDA/" class="mdl-chip tag">
            <span class="mdl-chip__text mdl-color-text--grey-600">EDA</span>
        </a>
        
        <a href="/tags/隔离/" class="mdl-chip tag">
            <span class="mdl-chip__text mdl-color-text--grey-600">隔离</span>
        </a>
        
    </div>
    
    <!-- tags -->
    <div class="mdl-card__actions mdl-card--border">
        <div class="mdl-grid padding-0" >
            <div class="mdl-cell mdl-cell--12-col" >
                <button class="mdl-button mdl-js-button mdl-button--accent mdl-color--grey-200 center" onclick="jump('/2017/07/10/微服务应该是事件驱动：-自洽-vs-当局/')">
                    READ
                </button>
            </div>
        </div>
    </div>
</div>
<!-- <<< page card -->

<div class="mdl-cell mdl-cell--12-col mdl-card mdl-shadow--2dp">
    <!-- title and bg -->

    
    
    <div class="mdl-card__title" onclick="jump('/2017/07/09/MMAP-FOR-C/')" style="background: url('/material/material-35.jpg') center / cover; cursor: pointer;">
        <h2 class="mdl-card__title-text text--bold" onclick="jump('/2017/07/09/MMAP-FOR-C/')">
            MMAP FOR C
        </h2>
    </div>
    <!-- description -->
    <div class="mdl-card__supporting-text">
        <p class="description">
            
            说明mmap （一种内存映射文件的方法） 编辑。mmap将一个文件或者其它对象映射进内存。文件被映射到多个页上，如果文件的大小不是所有页的大小之和，最后一个页不被使用的空间将会清零。mmap在用户空间映射调用系统中作用很大。
头文件 &lt;sys/mman.h&gt;函数原型
123void* mmap(void* start,size_t length,int prot,int flags,int fd,off_t offset);int munmap(void* start,size_t length);
mmap()[1] 必须以PAGE_SIZE为单位进行映射，而内存也只能以页...
            
        </p>
        <div class="create_time">
            27th July 9th 2017
        </div>
    </div>
    
    <div class="mdl-card__supporting-text padding-top-0 ">
        
        <a href="/tags/MMAP/" class="mdl-chip tag">
            <span class="mdl-chip__text mdl-color-text--grey-600">MMAP</span>
        </a>
        
        <a href="/tags/C/" class="mdl-chip tag">
            <span class="mdl-chip__text mdl-color-text--grey-600">C</span>
        </a>
        
        <a href="/tags/PROGRAMMING/" class="mdl-chip tag">
            <span class="mdl-chip__text mdl-color-text--grey-600">PROGRAMMING</span>
        </a>
        
    </div>
    
    <!-- tags -->
    <div class="mdl-card__actions mdl-card--border">
        <div class="mdl-grid padding-0" >
            <div class="mdl-cell mdl-cell--12-col" >
                <button class="mdl-button mdl-js-button mdl-button--accent mdl-color--grey-200 center" onclick="jump('/2017/07/09/MMAP-FOR-C/')">
                    READ
                </button>
            </div>
        </div>
    </div>
</div>
<!-- <<< page card -->

<div class="mdl-cell mdl-cell--12-col mdl-card mdl-shadow--2dp">
    <!-- title and bg -->

    
    
    <div class="mdl-card__title" onclick="jump('/2017/07/09/Postgres-配置-内存设置/')" style="background: url('/material/material-51.jpg') center / cover; cursor: pointer;">
        <h2 class="mdl-card__title-text text--bold" onclick="jump('/2017/07/09/Postgres-配置-内存设置/')">
            Postgres 配置 -- 内存设置
        </h2>
    </div>
    <!-- description -->
    <div class="mdl-card__supporting-text">
        <p class="description">
            
            前言配置文件postgres.conf中的很多设置都会影响性能。其中关于内存设置是较为关键的。
shared_buffers这是最重要的参数，postgresql通过shared_buffers和内核/磁盘打交道。 因此应该尽量大，让更多的数据缓存在shared_buffers中，通常设置为实际RAM的10％是合理的，比如50000(400M) 
work_mem在pgsql 8.0之前叫做sort_mem。postgresql在执行排序操作时，会根据work_mem的大小决定是否将一个大的结果集拆分为几个小的和work_mem查不多大小的临时文件。
显然拆分的结果是降低了排序的速度。因...
            
        </p>
        <div class="create_time">
            27th July 9th 2017
        </div>
    </div>
    
    <div class="mdl-card__supporting-text padding-top-0 ">
        
        <a href="/tags/数据库/" class="mdl-chip tag">
            <span class="mdl-chip__text mdl-color-text--grey-600">数据库</span>
        </a>
        
        <a href="/tags/Postgres/" class="mdl-chip tag">
            <span class="mdl-chip__text mdl-color-text--grey-600">Postgres</span>
        </a>
        
        <a href="/tags/优化/" class="mdl-chip tag">
            <span class="mdl-chip__text mdl-color-text--grey-600">优化</span>
        </a>
        
    </div>
    
    <!-- tags -->
    <div class="mdl-card__actions mdl-card--border">
        <div class="mdl-grid padding-0" >
            <div class="mdl-cell mdl-cell--12-col" >
                <button class="mdl-button mdl-js-button mdl-button--accent mdl-color--grey-200 center" onclick="jump('/2017/07/09/Postgres-配置-内存设置/')">
                    READ
                </button>
            </div>
        </div>
    </div>
</div>
<!-- <<< page card -->

<div class="mdl-cell mdl-cell--12-col mdl-card mdl-shadow--2dp">
    <!-- title and bg -->

    
    
    <div class="mdl-card__title" onclick="jump('/2017/01/09/hello-ana/')" style="background: url('/material/material-38.jpg') center / cover; cursor: pointer;">
        <h2 class="mdl-card__title-text text--bold" onclick="jump('/2017/01/09/hello-ana/')">
            hello-ana
        </h2>
    </div>
    <!-- description -->
    <div class="mdl-card__supporting-text">
        <p class="description">
            
            hello ananhello hello hello hello hello hello hello hello hello hello hello hello hello hello hello hello hello hello hello hello hello hello hello hello hello hello hello hello hello hello hello hello hello hello hello hello hello hello 

            
        </p>
        <div class="create_time">
            2nd January 9th 2017
        </div>
    </div>
    
    <div class="mdl-card__supporting-text padding-top-0 ">
        
        <a href="/tags/hello/" class="mdl-chip tag">
            <span class="mdl-chip__text mdl-color-text--grey-600">hello</span>
        </a>
        
    </div>
    
    <!-- tags -->
    <div class="mdl-card__actions mdl-card--border">
        <div class="mdl-grid padding-0" >
            <div class="mdl-cell mdl-cell--12-col" >
                <button class="mdl-button mdl-js-button mdl-button--accent mdl-color--grey-200 center" onclick="jump('/2017/01/09/hello-ana/')">
                    READ
                </button>
            </div>
        </div>
    </div>
</div>
<!-- <<< page card -->


        <!-- pagination -->
<nav class="pagination-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    
    <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--grey mdl-color-text--white" role="presentation" data-upgraded=",MaterialButton,MaterialRipple" disabled>
        <i class="material-icons">arrow_back</i>
        <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span>
    </button>
    
    <div class="section-spacer">
        <nav class="mdl-navigation mdl-layout--large-screen-only">
            
            
            <a href="/" class="pagination-nav__button">
                <button class="mdl-navigation__link mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--accent ">
                    1
                </button>
            </a>
            
        </nav>

        <nav class="mdl-navigation mdl-layout--small-screen-only">
            <span class="pagination-nav__number mdl-color-text--grey">1</span>
        </nav>
    </div>
    
    <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--grey mdl-color-text--white" role="presentation" data-upgraded=",MaterialButton,MaterialRipple" disabled>
        <i class="material-icons">arrow_forward</i>
        <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span>
    </button>
    
</nav>
    </div>
</div>
            <footer class="mdl-mini-footer">
    <div class="mdl-mini-footer__left-section">
        <div class="mdl-logo">Crazy Ana © 2017 - 2018, Power by <a href="https://hexo.io" target="_blank" >Hexo</a> Theme <a href="https://github.com/RyougiNevermore/hexo-theme-done" target="_blank" >done</a></div>
    </div>
    <div class="mdl-mini-footer__right-section">
        <ul class="mdl-mini-footer__link-list">
            <li><a id="LICENSE" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" target="_blank">Privacy &amp; Terms</a></li>
        </ul>
    </div>
    <div class="mdl-tooltip mdl-tooltip--top" for="LICENSE">Attribution-NonCommercial-ShareAlike 4.0 International (CC BY-NC-SA 4.0)</div>
</footer>
        </main>
    </div>
    <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdn.bootcss.com/material-design-lite/1.3.0/material.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script src="/javascript/done.js"></script>

</body>
</html>